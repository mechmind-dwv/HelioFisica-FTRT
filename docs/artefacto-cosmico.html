<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artefacto Maestro Cósmico</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.development.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e1b4b 0%, #581c87 50%, #000000 100%);
            color: white;
            overflow: hidden;
        }

        .artefacto-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        /* Estrellas de fondo */
        .stars-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
        }

        /* Panel de Control */
        .control-panel {
            position: absolute;
            top: 24px;
            left: 24px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(168, 85, 247, 0.4);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            max-width: 380px;
            z-index: 10;
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .panel-title h1 {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(135deg, #fbbf24, #a855f7, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .main-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .btn-primary {
            flex: 1;
            padding: 16px 20px;
            background: linear-gradient(135deg, #7c3aed, #3b82f6);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(124, 58, 237, 0.5);
        }

        .btn-secondary {
            padding: 16px 20px;
            background: linear-gradient(135deg, #4b5563, #6b7280);
            border: none;
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
        }

        .mode-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 24px;
        }

        .mode-btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(55, 65, 81, 0.8);
        }

        .mode-btn:hover {
            background: rgba(75, 85, 99, 0.8);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            box-shadow: 0 10px 25px -5px rgba(220, 38, 38, 0.4);
        }

        .mode-btn.active.observacion {
            background: linear-gradient(135deg, #d97706, #b45309);
            box-shadow: 0 10px 25px -5px rgba(217, 119, 6, 0.4);
        }

        .mode-btn.active.resonancia {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            box-shadow: 0 10px 25px -5px rgba(37, 99, 235, 0.4);
        }

        .mode-btn.active.sinfonia {
            background: linear-gradient(135deg, #7c3aed, #6d28d9);
            box-shadow: 0 10px 25px -5px rgba(124, 58, 237, 0.4);
        }

        .mode-label {
            font-size: 12px;
            opacity: 0.7;
        }

        /* Sistema Solar */
        .solar-system {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100vmin;
            height: 100vmin;
        }

        .orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid;
            border-radius: 50%;
            opacity: 0.15;
        }

        .planet {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            filter: drop-shadow(0 0 10px currentColor);
        }

        .planet:hover {
            transform: scale(1.2);
        }

        .sun {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            background: radial-gradient(circle, #fff 0%, #ffd700 40%, #ff8c00 70%, #ff4500 100%);
            box-shadow: 0 0 100px #ffd700;
            animation: sun-pulse 4s ease-in-out infinite;
        }

        @keyframes sun-pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.05); opacity: 0.9; }
        }

        @keyframes star-twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        .planet-label {
            position: absolute;
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            pointer-events: none;
            opacity: 0.8;
        }

        /* Panel de Información */
        .info-panel {
            position: absolute;
            top: 24px;
            right: 24px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(168, 85, 247, 0.4);
            max-width: 320px;
            z-index: 10;
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .planet-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .info-details {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 14px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
        }

        .info-label {
            color: #a855f7;
        }

        /* Leyenda Armónica */
        .harmony-legend {
            position: absolute;
            bottom: 24px;
            left: 24px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(168, 85, 247, 0.4);
            max-width: 500px;
            z-index: 10;
        }

        .harmony-title {
            text-align: center;
            color: #fbbf24;
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .harmony-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            gap: 8px;
            font-size: 12px;
            max-height: 160px;
            overflow-y: auto;
        }

        .grid-header {
            color: #a855f7;
            font-weight: bold;
            padding-bottom: 4px;
            border-bottom: 1px solid rgba(168, 85, 247, 0.3);
        }

        /* Logro de Coherencia */
        .coherence-achievement {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.95), rgba(168, 85, 247, 0.95), rgba(59, 130, 246, 0.95));
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            border: 4px solid rgba(251, 191, 36, 0.8);
            text-align: center;
            z-index: 100;
            animation: achievement-pulse 2s ease-in-out;
        }

        @keyframes achievement-pulse {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .achievement-stars {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
        }

        .achievement-star {
            animation: star-bounce 1s ease-in-out infinite;
        }

        @keyframes star-bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Volume2, VolumeX, Play, Pause, Users, Eye, Heart, Star, Award, Zap, Music } = lucideReact;

        const ArtefactoMaestroCosmico = () => {
            const [mode, setMode] = useState('observacion');
            const [isPlaying, setIsPlaying] = useState(false);
            const [isMuted, setIsMuted] = useState(false);
            const [userHeartRate, setUserHeartRate] = useState(72);
            const [coherence, setCoherence] = useState(0);
            const [selectedPlanet, setSelectedPlanet] = useState(null);
            const [showCoherenceAchievement, setShowCoherenceAchievement] = useState(false);
            
            const audioContextRef = useRef(null);
            const animationRef = useRef(null);

            // Escala Armónica Cósmica
            const celestialBodies = [
                { 
                    name: 'SOL', freq: 432.0, ratio: '1/1', color: '#FFD700', 
                    distance: 0, size: 60, meaning: 'El Corazón, la Tónica, la Conciencia Una',
                    note: 'Do', waveform: 'sine', orbitalPeriod: 0
                },
                { 
                    name: 'MERCURIO', freq: 144.0, ratio: '1/3', color: '#C0C0C0', 
                    distance: 100, size: 12, meaning: 'La Mente, el Mensajero',
                    note: 'Sol', waveform: 'sine', orbitalPeriod: 0.24
                },
                { 
                    name: 'VENUS', freq: 162.0, ratio: '3/8', color: '#FF69B4', 
                    distance: 140, size: 18, meaning: 'El Amor Incondicional',
                    note: 'La♭', waveform: 'sine', orbitalPeriod: 0.62
                },
                { 
                    name: 'TIERRA', freq: 172.8, ratio: '2/5', color: '#4169E1', 
                    distance: 180, size: 20, meaning: 'Materia/Espíritu',
                    note: 'La', waveform: 'sine', orbitalPeriod: 1.00
                },
                { 
                    name: 'MARTE', freq: 192.0, ratio: '4/9', color: '#CD5C5C', 
                    distance: 220, size: 16, meaning: 'Acción y Fuerza',
                    note: 'Si', waveform: 'sine', orbitalPeriod: 1.88
                },
                { 
                    name: 'JÚPITER', freq: 54.0, ratio: '1/8', color: '#FF8C00', 
                    distance: 320, size: 45, meaning: 'Expansión y Abundancia',
                    note: 'Do', waveform: 'triangle', orbitalPeriod: 11.86
                },
                { 
                    name: 'SATURNO', freq: 86.4, ratio: '1/5', color: '#F0E68C', 
                    distance: 400, size: 40, meaning: 'Estructura y Forma',
                    note: 'Mi', waveform: 'sawtooth', orbitalPeriod: 29.46
                },
                { 
                    name: 'URANO', freq: 61.7, ratio: '~1/7', color: '#40E0D0', 
                    distance: 480, size: 32, meaning: 'Intuición y Revolución',
                    note: 'Fa#', waveform: 'sine', orbitalPeriod: 84.01
                },
                { 
                    name: 'NEPTUNO', freq: 66.5, ratio: '~2/13', color: '#4B0082', 
                    distance: 560, size: 30, meaning: 'Sueño y Trascendencia',
                    note: 'Sol', waveform: 'sine', orbitalPeriod: 164.8
                }
            ];

            const [planets, setPlanets] = useState(celestialBodies.map((planet, index) => ({
                ...planet,
                angle: (index * 40) % 360,
                speed: planet.distance > 0 ? 0.5 / (planet.distance / 100) : 0
            })));

            // Estrellas de fondo
            const stars = Array.from({ length: 150 }, (_, i) => ({
                id: i,
                size: Math.random() * 2 + 1,
                left: Math.random() * 100,
                top: Math.random() * 100,
                opacity: Math.random() * 0.5 + 0.3,
                delay: Math.random() * 5,
                duration: Math.random() * 3 + 2
            }));

            useEffect(() => {
                if (isPlaying) {
                    animationRef.current = requestAnimationFrame(animate);
                }
                return () => cancelAnimationFrame(animationRef.current);
            }, [isPlaying]);

            const animate = () => {
                setPlanets(prev => prev.map(planet => ({
                    ...planet,
                    angle: (planet.angle + planet.speed * 0.5) % 360
                })));
                animationRef.current = requestAnimationFrame(animate);
            };

            const handlePlanetClick = (planet) => {
                setSelectedPlanet(planet);
                // Simular sonido al hacer clic
                if (isPlaying && !isMuted) {
                    playPlanetSound(planet);
                }
            };

            const playPlanetSound = (planet) => {
                // Implementación básica de sonido (simulada)
                console.log(`Reproduciendo: ${planet.name} - ${planet.freq}Hz`);
            };

            const playCelestialChord = () => {
                setShowCoherenceAchievement(true);
                setTimeout(() => setShowCoherenceAchievement(false), 4000);
            };

            return React.createElement('div', { className: 'artefacto-container' },
                // Estrellas de fondo
                React.createElement('div', { className: 'stars-background' },
                    stars.map(star => 
                        React.createElement('div', {
                            key: star.id,
                            className: 'star',
                            style: {
                                width: `${star.size}px`,
                                height: `${star.size}px`,
                                left: `${star.left}%`,
                                top: `${star.top}%`,
                                opacity: star.opacity,
                                animation: `star-twinkle ${star.duration}s ease-in-out ${star.delay}s infinite`
                            }
                        })
                    )
                ),

                // Panel de Control
                React.createElement('div', { className: 'control-panel' },
                    React.createElement('div', { className: 'panel-title' },
                        React.createElement(Music, { color: '#fbbf24', size: 28 }),
                        React.createElement('h1', null, 'Artefacto Maestro Cósmico')
                    ),
                    
                    React.createElement('div', { className: 'main-controls' },
                        React.createElement('button', {
                            className: 'btn-primary',
                            onClick: () => setIsPlaying(!isPlaying)
                        },
                            isPlaying ? React.createElement(Pause, { size: 20 }) : React.createElement(Play, { size: 20 }),
                            isPlaying ? 'PAUSAR' : 'INICIAR'
                        ),
                        React.createElement('button', {
                            className: 'btn-secondary',
                            onClick: () => setIsMuted(!isMuted)
                        },
                            isMuted ? React.createElement(VolumeX, { size: 20 }) : React.createElement(Volume2, { size: 20 })
                        )
                    ),

                    React.createElement('div', { className: 'mode-buttons' },
                        ['observacion', 'resonancia', 'sinfonia'].map(mod => 
                            React.createElement('button', {
                                key: mod,
                                className: `mode-btn ${mode === mod ? 'active ' + mod : ''}`,
                                onClick: () => setMode(mod)
                            },
                                React.createElement(mod === 'observacion' ? Eye : mod === 'resonancia' ? Heart : Users, { size: 18 }),
                                `Modo ${mod.charAt(0).toUpperCase() + mod.slice(1)}`,
                                React.createElement('span', { className: 'mode-label' }, 
                                    mod === 'observacion' ? 'Contemplación' : 
                                    mod === 'resonancia' ? 'Individual' : 'Grupal'
                                )
                            )
                        )
                    ),

                    mode === 'resonancia' && React.createElement('div', { 
                        style: { 
                            background: 'rgba(0, 0, 0, 0.4)', 
                            padding: '16px', 
                            borderRadius: '12px',
                            border: '1px solid rgba(59, 130, 246, 0.3)'
                        } 
                    },
                        React.createElement('div', { style: { marginBottom: '12px' } },
                            React.createElement('label', { 
                                style: { color: '#93c5fd', fontSize: '14px', display: 'block', marginBottom: '8px' } 
                            }, `💓 Ritmo Cardíaco: ${userHeartRate} BPM`),
                            React.createElement('input', {
                                type: 'range',
                                min: '50',
                                max: '120',
                                value: userHeartRate,
                                onChange: (e) => setUserHeartRate(parseInt(e.target.value)),
                                style: { width: '100%', accentColor: '#3b82f6' }
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { 
                                style: { color: '#93c5fd', fontSize: '14px', display: 'block', marginBottom: '8px' } 
                            }, `🌊 Coherencia Cardíaca: ${(coherence * 100).toFixed(1)}%`),
                            React.createElement('div', { 
                                style: { 
                                    width: '100%', 
                                    background: '#374151', 
                                    borderRadius: '8px', 
                                    height: '16px',
                                    overflow: 'hidden'
                                } 
                            },
                                React.createElement('div', {
                                    style: {
                                        background: 'linear-gradient(135deg, #60a5fa, #a855f7, #ec4899)',
                                        height: '100%',
                                        borderRadius: '8px',
                                        width: `${coherence * 100}%`,
                                        transition: 'width 0.5s'
                                    }
                                })
                            )
                        )
                    )
                ),

                // Sistema Solar
                React.createElement('div', { className: 'solar-system' },
                    // Órbitas
                    planets.slice(1).map(planet => 
                        React.createElement('div', {
                            key: `orbit-${planet.name}`,
                            className: 'orbit',
                            style: {
                                width: `${planet.distance * 2}px`,
                                height: `${planet.distance * 2}px`,
                                borderColor: planet.color
                            }
                        })
                    ),
                    
                    // Sol
                    React.createElement('div', {
                        className: 'sun',
                        style: {
                            width: `${planets[0].size}px`,
                            height: `${planets[0].size}px`
                        }
                    }),
                    
                    // Planetas
                    planets.slice(1).map(planet => {
                        const x = planet.distance * Math.cos(planet.angle * Math.PI / 180);
                        const y = planet.distance * Math.sin(planet.angle * Math.PI / 180);
                        
                        return React.createElement(React.Fragment, { key: planet.name },
                            React.createElement('div', {
                                className: 'planet',
                                onClick: () => handlePlanetClick(planet),
                                style: {
                                    width: `${planet.size}px`,
                                    height: `${planet.size}px`,
                                    background: planet.color,
                                    left: `calc(50% + ${x}px)`,
                                    top: `calc(50% + ${y}px)`,
                                    transform: 'translate(-50%, -50%)'
                                }
                            }),
                            React.createElement('div', {
                                className: 'planet-label',
                                style: {
                                    left: `calc(50% + ${x}px)`,
                                    top: `calc(50% + ${y + planet.size + 10}px)`,
                                    transform: 'translateX(-50%)'
                                }
                            }, planet.name)
                        );
                    })
                ),

                // Panel de Información
                selectedPlanet && React.createElement('div', { className: 'info-panel' },
                    React.createElement('div', { className: 'info-header' },
                        React.createElement('div', {
                            className: 'planet-color',
                            style: { background: selectedPlanet.color }
                        }),
                        React.createElement('h3', { 
                            style: { color: selectedPlanet.color, fontSize: '20px', fontWeight: 'bold' }
                        }, selectedPlanet.name)
                    ),
                    React.createElement('p', { 
                        style: { color: '#d8b4fe', fontSize: '14px', marginBottom: '16px', lineHeight: '1.4' }
                    }, selectedPlanet.meaning),
                    React.createElement('div', { className: 'info-details' },
                        [
                            ['Frecuencia:', `${selectedPlanet.freq} Hz`, '#ffffff'],
                            ['Proporción:', selectedPlanet.ratio, '#fbbf24'],
                            ['Nota Musical:', selectedPlanet.note, '#60a5fa'],
                            ['Forma de Onda:', selectedPlanet.waveform, '#34d399'],
                            ...(selectedPlanet.orbitalPeriod > 0 ? 
                                [['Período Orbital:', `${selectedPlanet.orbitalPeriod} años`, '#f472b6']] : [])
                        ].map(([label, value, color], index) =>
                            React.createElement('div', { 
                                key: index,
                                className: 'info-row'
                            },
                                React.createElement('span', { className: 'info-label' }, label),
                                React.createElement('span', { style: { color } }, value)
                            )
                        )
                    ),
                    React.createElement('button', {
                        onClick: () => setSelectedPlanet(null),
                        style: {
                            marginTop: '20px',
                            width: '100%',
                            padding: '12px',
                            background: 'linear-gradient(135deg, #7c3aed, #3b82f6)',
                            border: 'none',
                            borderRadius: '8px',
                            color: 'white',
                            fontWeight: '500',
                            cursor: 'pointer'
                        }
                    }, 'Cerrar')
                ),

                // Leyenda Armónica
                React.createElement('div', { className: 'harmony-legend' },
                    React.createElement('div', { className: 'harmony-title' }, '🌟 ESCALA ARMÓNICA CÓSMICA 🌟'),
                    React.createElement('div', { className: 'harmony-grid' },
                        ['PLANETA', 'PROPORCIÓN', 'FRECUENCIA', 'NOTA', 'ARMÓNICA'].map(header =>
                            React.createElement('div', { key: header, className: 'grid-header' }, header)
                        ),
                        planets.map(planet =>
                            [
                                React.createElement('span', { 
                                    key: 'name', 
                                    style: { color: planet.color, fontWeight: '500' }
                                }, planet.name),
                                React.createElement('span', { key: 'ratio', style: { color: '#fbbf24' } }, planet.ratio),
                                React.createElement('span', { key: 'freq', style: { color: '#60a5fa' } }, `${planet.freq} Hz`),
                                React.createElement('span', { key: 'note', style: { color: '#34d399' } }, planet.note),
                                React.createElement('span', { key: 'wave', style: { color: '#f472b6' } }, planet.waveform)
                            ].map((element, index) => 
                                React.createElement('div', { key: index }, element)
                            )
                        ).flat()
                    ),
                    React.createElement('div', { 
                        style: { 
                            marginTop: '12px', 
                            paddingTop: '12px', 
                            borderTop: '1px solid rgba(251, 191, 36, 0.3)',
                            textAlign: 'center'
                        } 
                    },
                        React.createElement('p', { 
                            style: { color: '#34d399', fontSize: '11px' }
                        }, '🎵 Afinación Base: 432 Hz • Frecuencia de la Coherencia Universal 🎵')
                    )
                ),

                // Logro de Coherencia
                showCoherenceAchievement && React.createElement('div', { className: 'coherence-achievement' },
                    React.createElement('div', { style: { position: 'relative', marginBottom: '16px' } },
                        React.createElement(Award, { size: 64, color: 'white' }),
                        React.createElement(Zap, { 
                            size: 24, 
                            color: '#fbbf24',
                            style: { 
                                position: 'absolute', 
                                top: '-8px', 
                                right: '-8px' 
                            } 
                        })
                    ),
                    React.createElement('h2', { 
                        style: { 
                            fontSize: '32px', 
                            fontWeight: 'bold', 
                            color: 'white',
                            marginBottom: '8px'
                        } 
                    }, '¡COHERENCIA CÓSMICA!'),
                    React.createElement('p', { 
                        style: { 
                            fontSize: '18px', 
                            color: '#fef3c7',
                            marginBottom: '16px'
                        } 
                    }, 'La Sinfonía Universal Resuena en Vosotros'),
                    React.createElement('div', { className: 'achievement-stars' },
                        Array.from({ length: 8 }, (_, i) =>
                            React.createElement(Star, {
                                key: i,
                                className: 'achievement-star',
                                size: 20,
                                color: '#fef3c7',
                                style: { animationDelay: `${i * 0.2}s` }
                            })
                        )
                    )
                ),

                // Demo button para probar la coherencia
                React.createElement('button', {
                    onClick: playCelestialChord,
                    style: {
                        position: 'absolute',
                        bottom: '24px',
                        right: '24px',
                        padding: '12px 16px',
                        background: 'rgba(0, 0, 0, 0.7)',
                        border: '1px solid rgba(168, 85, 247, 0.4)',
                        borderRadius: '8px',
                        color: 'white',
                        cursor: 'pointer',
                        zIndex: 10
                    }
                }, 'Probar Coherencia')
            );
        };

        // Renderizar la aplicación
        ReactDOM.render(React.createElement(ArtefactoMaestroCosmico), document.getElementById('root'));
    </script>
</body>
</html>
